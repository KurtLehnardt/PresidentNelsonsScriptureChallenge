<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>President Nelson's Scripture Challenge</title>
    
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./scriptureData.js"></script>
    <script src="./scriptureMap.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="header-title" style="display: flex; justify-content: center; align-items: center;">
                    <h1 style="
                        display: flex; 
                        align-items: center; 
                        white-space: nowrap;
                        /* CRITICAL: Adds uniform spacing between the text and images */
                        gap: 15px; 
                    ">
                        <img src="https://www.churchofjesuschrist.org/imgs/c730fd12d24c640f7649912008ddf828afd93403/full/200%2C/0/default.png" alt="Logo" class="logo" onerror="this.style.display='none'" style="
                            /* CRITICAL: Force the small logo to occupy a larger, defined space */
                            width: 80px; 
                            height: auto;
                        ">
                        President Nelson's Scripture Challenge
                        <img src="https://www.churchofjesuschrist.org/imgs/dd82949cce59918d88ed1cfa9e7c0fc38f7009b3/full/%21200%2C/0/default" alt="portrait" class="portrait" onerror="this.style.display='none'" style="
                            border-radius: 50%;
                            scale: 120%;
                            /* CRITICAL: Force the portrait to occupy the same space as the logo */
                            width: 80px;
                            height: auto;
                        ">
                    </h1>
                </div>
                    <a href="https://www.churchofjesuschrist.org/study/new-era/2018/01/study-the-saviors-words?lang=eng" target="_blank" class="learn-more">
                        Learn about the challenge
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height: 1em; width: 1em; margin-left: 0.25em; vertical-align: middle;">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                    </a>
            </div>
            <div class="user-info" id="userInfo">
                <button class="login-btn" onclick="showAuthModal()">Sign In</button>
                <div class="user-avatar hidden"></div>
                <span class="user-name hidden" style="color: white; font-weight: 500;"></span>
            </div>
            <div>
                <button class="logout-btn hidden" onclick="handleLogout()">Sign Out</button>
            </div>
        </div>
        
        <div class="stats" id="statsSection">
            <div class="stats-header" onclick="toggleStats()">
                <h2>Progress</h2>
                <div class="progress-bar-minimal">
                    <div class="progress-fill" id="progressFillMinimal">0%</div>
                </div>
                <span class="expand-icon" id="statsExpandIcon">
                    <i class="fas fa-chevron-down"></i>
                </span>
            </div>
            <div class="stats-content" id="statsContent">
                <!-- <div class="progress-bar"> removing this progress bar when the div is expanded
                    <div class="progress-fill" id="progressFill">0%</div>
                </div> -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalRead">0</div>
                        <div class="stat-label">Scriptures Read</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalScriptures">0</div>
                        <div class="stat-label">Total Scriptures</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="streakDays">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="percentComplete">0%</div>
                        <div class="stat-label">Complete</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- <div class="stats"> old stats section without minimizing/max functionality
            <h2>Your Progress</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0%</div>
            </div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalRead">0</div>
                    <div class="stat-label">Scriptures Read</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalScriptures">0</div>
                    <div class="stat-label">Total Scriptures</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="streakDays">0</div>
                    <div class="stat-label">Day Streak</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="percentComplete">0%</div>
                    <div class="stat-label">Complete</div>
                </div>
            </div>
        </div> -->

        <div id="scriptureBooks"></div>
        
        <div class="restart-section">
            <p class="restart-description">Start the challenge again.</p>
            <button class="restart-btn" onclick="confirmRestart()">
                <span>
                    <i class="fas fa-rotate-left"></i>
                </span>
                <span>Restart Challenge</span>
            </button>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Choose Sign In Method</h2>
                <button class="close-btn" onclick="closeAuthModal()">&times;</button>
            </div>
            <div class="auth-options">
                <button class="auth-btn" onclick="handleLogin('google')">
                    <span class="auth-icon">
                        <i class="fa-brands fa-google"></i>
                    </span>
                    <span>Continue with Google</span>
                </button>
                <!-- Facebook and apple are pending verification -->
                <!-- <button class="auth-btn" onclick="handleLogin('facebook')">
                    <span class="auth-icon">
                        <i class="fa-brands fa-facebook"></i>
                    </span>
                    <span>Continue with Facebook</span>
                </button>
                <button class="auth-btn" onclick="handleLogin('apple')">
                    <span class="auth-icon">
                        <i class="fa-brands fa-apple"></i>
                    </span>
                    <span>Continue with Apple</span>
                </button> -->
                <button class="auth-btn" onclick="handleLogin('github')">
                    <span class="auth-icon">
                        <i class="fa-brands fa-github"></i>
                    </span>
                    <span>Continue with GitHub</span>
                </button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <span id="toastMessage"></span>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="./firebase.js"></script>
    <script src="./app.js"></script>
</body>
</html>
